define("editor",["jquery"],function(e){(function(e){e.fn.textBlink=function(t){var n={color:["#fff","#ffe2d1","#ffc2a1","#ffa370","#ff8340","#ff630f"],blinktime:60,circle:2},t=e.extend(n,t),r=0;this.each(function(){var n=e(this);for(var i=0;i<t.color.length*t.circle;i++)setTimeout(function(){n.css("background-color",t.color[r]),r++,r%=t.color.length},t.blinktime*i)})}})(jQuery);var t=function(){function t(e){var t=this;this.textinput=e}function n(){var e=["微笑","大笑","鼓掌","为什么","哭","怒","滴汗","俏皮","傲","好困惑","兴奋","加油","困顿","想一下","撇嘴","色","发呆","得意","害羞羞","大哭","呲牙","惊讶","囧","抓狂","偷笑","愉快","憨笑","晕","再见","坏笑","左哼哼","右哼哼","哈欠","委屈","快哭了","亲","可怜","口罩","笑哭","惊吓","哼","捂脸","奸笑","吃瓜","旺柴","围观","摊手","爱心","献花","福","拜神","胜利","赞","握手","抱拳","勾引","拳头","OKOK","强壮","毛估估","亏大了","赚大了","牛"," ","成交","财力","护城河","复盘","买入","卖出","满仓","空仓","抄底","看多","看空","加仓","减仓","上涨","下跌","财神","火箭","龙头","韭菜","面","泡沫","惨!关灯吃面"],t=[],n="";for(var r=0;r<67;r++){n=(r+1).toString();if(!e[r]||e[r]==" ")continue;t.push('<li title="'+e[r]+'"><img src="//gbfek.dfcfw.com/face/emot_default_28x28/emot'+n+'.png" alt="'+e[r]+'"></li>')}return t.join("")}function r(e,t){var n="9.0",r=navigator.userAgent.toLowerCase(),i=r.indexOf("msie")>-1,s=r.match(/msie ([\d.]+)/);i&&s[1]<=n?require(["caretie"],function(){e.insertAtCaret(t)}):require(["jquery.caret"],function(){var n=e.caret("pos"),r,i;r=e.val().substring(0,n),i=e.val().substring(n),e.val(r+t+i)})}function i(t,n){new AjaxUpload("selectimglink",{action:window.xConfig.host+"writenc/Common/UploadImage.aspx?plat=Jsonp&product=UserCenter&version=200",name:"uploadfile",data:{cb:"https://"+self.location.host+"/upload_callback.aspx"},onSubmit:function(t,n){if(!n||!/^(jpg|jpeg|png|gif)$/.test(n))return alert("不支持上传非图片格式文件！"),!1;e("#selectimglink").hide(),e("#editorinsertimgubtn2").show(),e("#insertimgdiv").data("load","1")},onComplete:function(r,i){var u=e.parseJSON(i);if(u.rc==1){e("#insertimgdiv").hide();var a=u.url;e("#editorinsertimgubtn2").hide(),e("#selectimglink").show();var f='<div class="shadowbox" id="uploadpreview"><div class="shadowboxtoparrow"></div><table class="shadowboxt" cellspacing="0" cellpadding="0"><tr><td class="l7"></td><td class="l8"></td><td class="l9"></td></tr><tr><td class="l4"></td><td class="l5"><div id="uploadpreviewdiv" class="uploadpreviewdiv"><ul><li data-url="'+a+'"><a href="javascript:;" class="uploadpreviewdelete">删除</a><br /><img src="'+a+'" /></li><li class="continue_upload"><div id="contupload">继续上传</div><div class="uploadmoreing"><img src="./style/image/loading.gif" width="16" height="16" alt="" />正在上传</div></li></ul><div class="clear"></div></div></td><td class="l6"></td></tr><tr><td class="l1"></td><td class="l2"></td><td class="l3"></td></tr></table></div>';if(e("#uploadpreview").length>0)return e("#uploadpreview").remove(),!1;n.after(f),e("#uploadpreviewdiv ul").css("width",240),e("#uploadpreview").css({left:n.position().left,bottom:50}),o(t),e(".uploadpreviewdelete").live("click",function(){e(this).parents("li").remove(),e("#uploadpreview li").length<=1?e(".uploadmoreing").is(":hidden")&&e("#uploadpreview").remove():e("#uploadpreview li").length<4&&e("#uploadpreviewdiv li:last").show(),e("#uploadpreviewdiv ul").css("width",e("#uploadpreviewdiv li:visible").length*120),o(t)}),s(t,n)}else alert(u.me),e("#editorinsertimgubtn2").remove(),e("#selectimglink").show(),e("#insertimgdiv").data("load","")}})}function s(t,n){new AjaxUpload("contupload",{action:window.xConfig.host+"writenc/Common/UploadImage.aspx?plat=Jsonp&product=UserCenter&version=200",name:"uploadfile",data:{cb:"https://"+self.location.host+"/upload_callback.aspx"},onSubmit:function(t,n){if(!n||!/^(jpg|jpeg|png|gif)$/.test(n))return alert("不支持上传非图片格式文件！"),!1;e("#uploadpreviewdiv #contupload").hide(),e("#uploadpreviewdiv .uploadmoreing").show()},onComplete:function(n,r){var i=e.parseJSON(r);if(i.rc==1){var s=i.url;e("#uploadpreviewdiv li:last").before('<li data-url="'+s+'"><a href="javascript:;" class="uploadpreviewdelete">删除</a><br /><img src="'+s+'" /></li>'),e("#uploadpreviewdiv li").length==4?(e("#uploadpreviewdiv #contupload").show(),e("#uploadpreviewdiv .uploadmoreing").hide(),e("#uploadpreviewdiv li:last").hide()):(e("#uploadpreviewdiv #contupload").show(),e("#uploadpreviewdiv .uploadmoreing").hide()),e("#uploadpreviewdiv ul").css("width",e("#uploadpreviewdiv li:visible").length*120),o(t)}else alert(i.me),e("#uploadpreviewdiv #contupload").show(),e("#uploadpreviewdiv .uploadmoreing").hide()}})}function o(t){var n=[];e("#uploadpreviewdiv li").each(function(){e(this).data("url")!=undefined&&n.push(e(this).data("url"))}),t.data("uploadimgval",n.join(","))}return t.prototype.bindInsertFace=function(t){var i=this,s=!1;return t.click(function(){if(!s){var o='<div class="shadowbox" id="listinsertfacediv"><div class="shadowboxtoparrow"></div><table class="shadowboxt" cellspacing="0" cellpadding="0"><tr><td class="l7"></td><td class="l8"></td><td class="l9"></td></tr><tr><td class="l4">&ensp;</td><td class="l5"><div class="shadowboxbody"><div id="facediv"><ul id="facelist">'+n()+'</ul><div class="clear"></div></div></div></td><td class="l6"></td></tr><tr><td class="l1"></td><td class="l2"></td><td class="l3"></td></tr></table></div>';t.after(o);var u=e("#listinsertfacediv");u.css({left:t.position().left,bottom:50}),e("li",u).click(function(){r(i.textinput,"["+e(this).attr("title")+"]"),u.hide()}),e(document).click(function(t){var n=e(t.target);n.is("#listinsertfacediv")||n.parents().is("#listinsertfacediv")||n.is("#gbtainpubtn4")||n.parents().is("#gbtainpubtn4")||e("#listinsertfacediv").hide()}),s=!0}else{var u=e("#listinsertfacediv");u.is(":visible")?u.hide():u.show()}}),!1},t.prototype.bindInsertImg=function(t){var n=this,r=!1,s=null;return t.click(function(){r?e("#uploadpreviewdiv").length?e("#uploadpreview").is(":visible")?e("#uploadpreview").hide():e("#uploadpreview").show():s.is(":visible")?s.hide():s.show():(s=e('<div class="shadowbox" id="insertimgdiv"><div class="shadowboxtoparrow"></div><table class="shadowboxt" cellspacing="0" cellpadding="0"><tr><td class="l7"></td><td class="l8"></td><td class="l9"></td></tr><tr><td class="l4"></td><td class="l5"><div class="uploadimgtips" id="uploadimgtips"><a href="javascript:;" id="selectimglink" class="selectimglink">从电脑选择图片</a><div class="editorinsertimgubtn" id="editorinsertimgubtn2">正在上传…</div><br><div>仅支持JPG、GIF、PNG图片文件，且文件小于4M</div><p class="wxtip">温馨提醒：请确认您对上传的图片拥有合法版权，因图片侵权所引发的法律责任将由作者承担。</p></div></td><td class="l6"></td></tr><tr><td class="l1"></td><td class="l2"></td><td class="l3"></td></tr></table></div>'),t.after(s),s.css({left:t.position().left,bottom:50}),r=!0,require(["ajax_upload"],function(){i(n.textinput,t)}),e(document).click(function(t){var n=e(t.target);n.is("#gbtainpubtn5")||n.parents().is("#gbtainpubtn5")||n.is("#insertimgdiv")||n.parents().is("#insertimgdiv")||n.is("#absFileInput")||n.is("#uploadpreviewdiv img")||n.is("#contupload")||n.is("#uploadpreviewdiv")||n.is("#uploadpreview")||n.is(".uploadpreviewdelete")||(e("#uploadpreview").hide(),e("#insertimgdiv").hide())}))}),!1},t.prototype.bindInsertStock=function(t){var n=this,i=!1,s=null;return t.click(function(){i?s.is(":visible")?s.hide():(s.show(),e("#inputincodein",s).val("").focus()):(s=e('<div class="shadowbox" id="insertstockcodediv"><table class="shadowboxt" cellspacing="0" cellpadding="0"><tr><td class="l7"></td><td class="l8"></td><td class="l9"></td></tr><tr><td class="l4"></td><td class="l5"><div class="inputincode" id="inputincode"><div class="close"></div><div class="title">请输入股票代码、名称或简拼</div><div class="input"><input type="text" name="" id="inputincodein" /></div></div></td><td class="l6"></td></tr><tr><td class="l1"></td><td class="l2"></td><td class="l3"></td></tr></table></div>'),t.after(s),e("#inputincodein",s).focus(),setTimeout(function(){e("#inputincodein",s).val("")},200),i=!0,s.css({left:t.position().left-90,top:t.position().top+20}),require(["stocksuggest"],function(e){var t={text:" ",autoSubmit:!1,width:235,type:"STOCK",header:["选项","代码","名称","类型"],body:[-1,1,4,-2],callback:function(e){var t="";e.type=="1"&&e.mt=="1"?t="SH":e.type=="1"&&e.mt=="2"?t="SZ":e.type=="31"?t="US":e.type=="21"?t="HK":e.type=="40"?t="ZS":e.type=="2"?t="B":e.type=="11"&&(t="KJ");var i="$"+e.cnName+"("+e.code+"."+t+")$ ";return r(n.textinput,i),s.hide(),n.textinput.focus(),!1}},i=new StockSuggest("inputincodein",t)}),e(document).click(function(t){var n=e(t.target);n.is("#gbtainpubtn7")||n.parents().is("#gbtainpubtn7")||n.is("#insertstockcodediv")||n.parents().is("#insertstockcodediv")||s.hide()}),e(".close",s).click(function(){s.hide()}))}),!1},t}();return t}),define("comCookie",["jquery"],function(e){var t={set:function(e,t,n,r,i){n=new Date((new Date).getTime()+(typeof n=="undefined"?86400:n)*1e3);var s=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(r?"; path="+r:"; path=/")+(i?"; domain="+i:"");s.length<4096?document.cookie=s:alert("The cookie is bigger than cookie lagrest")},get:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return t!=null?decodeURIComponent(t[2]):null},del:function(e,t,n){this.get(e)&&(document.cookie=e+"="+(t?"; path="+t:"; path=/")+(n?"; domain="+n:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")},day:function(e){return e*24*3600},hour:function(e){return e*3600}};return t}),define("comUser",["comCookie"],function(e){var t={};return t.isLogin=function(){var t=e.get("pi");return t?!0:!1},t.getUser=function(){var t=null,n=e.get("pi");if(n){var r=n.split(";");t={id:r[0],name:r[1],nick:r[2]}}else t=null;return t},t.logOut=function(){var e=new Date;document.cookie="dcusername=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuserinfo=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcusermingchen=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuserpass=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuserpubinfo=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuserpubs=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuserkeys=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuser_name=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuser_info=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuser_mingchen=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuser_pass=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuser_pubinfo=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuser_pubs=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="dcuser_keys=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="puser_pname=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="puser_pinfo=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="pi=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="ct=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="ut=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="uidal=;path=/;domain=eastmoney.com;expires="+e.toGMTString(),document.cookie="is_bind_phone=;path=/;domain=eastmoney.com;expires="+e.toGMTString();if(t.getUser()){var n=t.getUser().id;document.cookie="oldVoteUsers"+n+"=;path=/;domain=eastmoney.com;expires="+e.toGMTString()}},t.toLogOut=function(){t.logOut(),window.location.reload()},t}),define("common",["jquery"],function(e){function t(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return n!=null?unescape(n[2]):null}function n(t,n,r,i,s){s=s?s:"json",n=n?n:{},n=e.extend(n,{version:"200",Product:"UserCenter",Plat:"Jsonp"}),e.ajax({type:"post",url:xConfig.host+t+"?r="+Math.random(),dataType:s,data:n,success:function(e){r&&r(e)},error:function(e,t,n){i&&i(t)}})}function r(e,t){var n=document.createElement("iframe");n.width=0,n.height=0,n.frameBorder=0,n.style.display="none",n.src=e+"?callStr="+t,document.body.appendChild(n)}return window.xConfig={},window.xConfig.isDebug=function(){return location.href.indexOf("localhost")>-1||location.href.indexOf("172.16")>-1||location.href.indexOf("xiling")>-1?!0:!1},location.href.indexOf("gubatestapi")>=0?xConfig.host="/v3/":xConfig.host="/v3/",window.xConfig=xConfig,e.gbLen=function(e){var t=0;for(var n=0;n<e.length;n++)e.charCodeAt(n)>127||e.charCodeAt(n)==94?t+=2:t++;return t},{getQueryString:t,callIFameParent:r,send:n}}),require(["jquery","editor","comUser","common"],function(e,t,n,r){e().ready(function(){function f(t,n){var i=prompt(t,"");i=e.trim(i),i&&r.send("write/Common/AppealMyAccount.aspx",{words:i,type:n},function(e){e.rc==1?alert("您的申请已经提交，我们将尽快处理！"):alert(e.me)},function(){})}function h(){var t=this,i={},o=0,u=e.trim(e("#textarea").val()),a=[];if(!u){e("#textarea").textBlink({color:["#FFDDDD","#FFEEEE","#fff"],blinktime:150});return}e("#gdsubmitlimit").length>0&&e("#gdsubmitlimit").is(":checked")&&(o=2);var h=[];e("#uploadpreviewdiv li").each(function(){var t=e(this).data("url");t&&h.push(e(this).data("url"))}),h.length>0&&(a=h.join(",")),i={text:u,title:"",postid:0,code:l,pic:a,pi:"ecp",pitype:1,replyauthority:o},p(t,!1),e(t).html("发布中..."),r.send(c,i,function(r){p(t,!0),e(t).html("发布");if(r.rc==1){if(window.shiming.type==1){window.shiming.isCheckPhone(s,2);var i=!0;setInterval(function(){window.shiming.isContinue&&i&&(i=!1,e("#modal_success").show(),setTimeout(function(){e("#modal_success").hide()},3e3))},1e3)}else e("#modal_success").show(),setTimeout(function(){e("#modal_success").hide()},3e3);n.isLogin()?e("#modal_success .tips").hide():e("#modal_success .tips").show(),e("#textarea").val(""),e("#uploadpreviewdiv li").each(function(){var t=e(this).data("url");t&&e(".uploadpreviewdelete").trigger("click")})}else r.error_code==19?f("抱歉！您的帐号存在异常，暂时无法正常发言。",0):r.error_code==20?alert("您的申请已经提交，我们将尽快处理！"):r.error_code==47?window.shiming.realNameFn("otherUser"):alert(r.me)},function(n){p(t,!0),e(t).html("发布")})}function p(t,n){n?e(t).removeAttr("disabled"):e(t).attr("disabled","disabled")}function v(t){t!=null&&(e("#editor").css({width:t}),e(".textarea").css({width:t-40}),e(".row3").css({width:t-30}))}function g(t){t==1||t=="true"||t==undefined?e("#btn_quit").show():e("#btn_quit").hide()}function b(t){t==1&&(e("#login,#un_login").hide(),n.isLogin()||e("#gbtainpubtn5").hide())}var i=new t(e("#textarea")),s=r.getQueryString("logincb");if(!s||!(s.indexOf("eastmoney")>=0||s.indexOf("1234567")>=0))s="";if(n.isLogin()){var o=n.getUser();e("#un_login").hide(),e("#login").show(),e("#btn_quanxian").show(),e("#username").html(o.nick),e("#btn_found").show(),i.bindInsertFace(e("#gbtainpubtn4")),i.bindInsertImg(e("#gbtainpubtn5")),e("#textarea").unbind("click");var u=1,a=1;if(window.shiming.type==2){window.shiming.isShowPop=2,window.shiming.isCheckPhone(s,2);if(!window.shiming.isContinue&&!window.shiming.getCookie("shimingReturn"+o.id))e("#modal_dialog_shiming").show();else if(window.shiming.isContinue&&u==1||window.shiming.getCookie("shimingReturn"+o.id))e("#modal_dialog_shiming").hide(),u=0,window.shiming.delCookie("shimingReturn"+o.id)}else e("#modal_dialog_shiming").hide();e("#modal_dialog_shiming").off("click").on("click",function(t){!window.shiming.isContinue&&a==1&&window.shiming.type==2?(a=2,window.shiming.realNameFn(s,2),e("#textarea").unbind("focus").blur(),e("#shiming .close,#shiming .late,#shiming .btnBindPho2").bind("click",function(){a==2&&(a=3,e("#modal_dialog_shiming").hide()),e(this).attr("class")=="btnBindPho2"&&window.shiming.addCookie("shimingReturn"+o.id,"1")})):e("#modal_dialog_shiming").hide()})}else e("#modal_dialog_shiming").hide(),e("#un_login").show(),e("#login").hide(),e("#btn_quanxian").hide(),e("#btn_found").hide(),e("#gbtainpubtn4,#gbtainpubtn5,.gbsformi4").click(function(){window.open("https://passport2.eastmoney.com/pub/login?backurl="+s)}),e("#textarea").bind("click",function(){alert("文明上网，不传谣言！请在登录后，发表评论！"),window.open("https://passport2.eastmoney.com/pub/login?backurl="+s)});e("#btn_found").click(function(){r.send("read/User/Common/IsAppealed.aspx",{},function(e){e.result?alert("您的申请已经提交，我们将尽快处理！"):f("如果您的帖子无法显示,可申请管理员修复!",1)},function(){})}),e("#btn_quit").click(function(){n.logOut(),e("#un_login").show(),e("#login").hide(),e("#btn_quanxian").hide(),e("#btn_found").hide(),top.location.href=s,e("#textarea").bind("click",function(){alert("文明上网，不传谣言！请在登录后，发表评论！"),window.open("https://passport2.eastmoney.com/pub/login?backurl="+s)})});var l=r.getQueryString("s");e("#btn_login").attr("href","https://passport2.eastmoney.com/pub/login?backurl="+s),e("#btn_clear").click(function(){e("#textarea").val(""),e("#textarea").focus()});var c="write/Article/Post/Post.aspx";e("#btn_submit").click(function(){h()});var d=r.getQueryString("width");v(d);var m=r.getQueryString("exit");g(m);var y=r.getQueryString("ispc");b(y),l.indexOf("of")==0?e("#fund_mzsm").show():e("#mzsm").show()})}),define("main",function(){});